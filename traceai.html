<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TN Police AI System - Mobile</title>
  <script src="/_sdk/element_sdk.js"></script>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&amp;family=Poppins:wght@400;500;600;700;800&amp;display=swap"
    rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #0A0E27;
      color: #E8EDF5;
      overflow-x: hidden;
      box-sizing: border-box;
      font-size: 14px;
    }

    html,
    body {
      height: 100%;
    }

    /* Animated Background */
    .animated-bg {
      position: fixed;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #0A0E27 0%, #1A1F3A 50%, #0A0E27 100%);
      z-index: -1;
    }

    .grid-overlay {
      position: fixed;
      width: 100%;
      height: 100%;
      background-image:
        linear-gradient(rgba(0, 191, 255, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 191, 255, 0.03) 1px, transparent 1px);
      background-size: 30px 30px;
      animation: gridMove 20s linear infinite;
      z-index: -1;
    }

    @keyframes gridMove {
      0% {
        transform: translate(0, 0);
      }

      100% {
        transform: translate(30px, 30px);
      }
    }

    .glow-orb {
      position: fixed;
      border-radius: 50%;
      filter: blur(80px);
      opacity: 0.3;
      animation: float 15s ease-in-out infinite;
      z-index: -1;
    }

    .orb-1 {
      width: 300px;
      height: 300px;
      background: radial-gradient(circle, rgba(0, 191, 255, 0.5), transparent);
      top: -10%;
      left: -15%;
    }

    .orb-2 {
      width: 250px;
      height: 250px;
      background: radial-gradient(circle, rgba(0, 123, 255, 0.4), transparent);
      bottom: -5%;
      right: -10%;
      animation-delay: 7s;
    }

    @keyframes float {

      0%,
      100% {
        transform: translate(0, 0) scale(1);
      }

      33% {
        transform: translate(30px, -30px) scale(1.1);
      }

      66% {
        transform: translate(-20px, 20px) scale(0.9);
      }
    }

    /* Login Page */
    .login-page {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100%;
      padding: 20px;
    }

    .login-container {
      background: rgba(15, 23, 42, 0.95);
      backdrop-filter: blur(30px);
      border: 1px solid rgba(0, 191, 255, 0.3);
      border-radius: 20px;
      padding: 30px 20px;
      width: 100%;
      max-width: 400px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.7), 0 0 40px rgba(0, 191, 255, 0.2);
      animation: slideIn 0.6s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(30px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .logo-container {
      text-align: center;
      margin-bottom: 30px;
    }

    .logo-badge {
      width: 70px;
      height: 70px;
      margin: 0 auto 20px;
      background: linear-gradient(135deg, #00BFFF, #0080FF);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 10px 35px rgba(0, 191, 255, 0.6);
      animation: pulse 3s ease-in-out infinite;
      position: relative;
    }

    .logo-badge::before {
      content: '';
      position: absolute;
      width: 120%;
      height: 120%;
      border-radius: 50%;
      border: 2px solid #00BFFF;
      animation: radar 2s linear infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        box-shadow: 0 10px 35px rgba(0, 191, 255, 0.6);
      }

      50% {
        box-shadow: 0 10px 50px rgba(0, 191, 255, 0.9);
      }
    }

    @keyframes radar {
      0% {
        transform: scale(1);
        opacity: 1;
      }

      100% {
        transform: scale(1.6);
        opacity: 0;
      }
    }

    .logo-badge svg {
      width: 40px;
      height: 40px;
    }

    .login-title {
      font-family: 'Poppins', sans-serif;
      font-size: 22px;
      font-weight: 800;
      margin-bottom: 8px;
      background: linear-gradient(135deg, #00BFFF, #FFFFFF);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .login-subtitle {
      color: #94A3B8;
      font-size: 13px;
      margin-bottom: 30px;
      line-height: 1.5;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-size: 11px;
      font-weight: 700;
      color: #00BFFF;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .form-input,
    .form-select {
      width: 100%;
      padding: 14px 16px;
      background: rgba(10, 14, 39, 0.8);
      border: 1px solid rgba(0, 191, 255, 0.3);
      border-radius: 10px;
      color: #E8EDF5;
      font-size: 14px;
      transition: all 0.3s ease;
      font-family: 'Inter', sans-serif;
    }

    .form-input:focus,
    .form-select:focus {
      outline: none;
      border-color: #00BFFF;
      box-shadow: 0 0 0 3px rgba(0, 191, 255, 0.2);
      background: rgba(10, 14, 39, 0.95);
    }

    .login-btn {
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, #00BFFF, #0080FF);
      border: none;
      border-radius: 10px;
      color: white;
      font-size: 15px;
      font-weight: 800;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      box-shadow: 0 6px 25px rgba(0, 191, 255, 0.6);
      margin-top: 10px;
      font-family: 'Poppins', sans-serif;
    }

    .login-btn:active {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(0, 191, 255, 0.8);
    }

    .login-footer {
      text-align: center;
      margin-top: 25px;
      padding-top: 20px;
      border-top: 1px solid rgba(0, 191, 255, 0.2);
      color: #64748B;
      font-size: 11px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      line-height: 1.5;
    }

    /* Dashboard */
    .dashboard {
      display: none;
      flex-direction: column;
      min-height: 100%;
    }

    .dashboard.active {
      display: flex;
    }

    /* Mobile Navigation */
    .mobile-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(15, 23, 42, 0.98);
      backdrop-filter: blur(30px);
      border-top: 1px solid rgba(0, 191, 255, 0.2);
      display: flex;
      justify-content: space-around;
      padding: 10px 5px;
      z-index: 1000;
      box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.5);
    }

    .mobile-nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      padding: 8px 12px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      color: #94A3B8;
      font-size: 10px;
      font-weight: 600;
      text-align: center;
      min-width: 60px;
    }

    .mobile-nav-item svg {
      width: 22px;
      height: 22px;
    }

    .mobile-nav-item.active {
      background: rgba(0, 191, 255, 0.2);
      color: #00BFFF;
    }

    /* Topbar */
    .topbar {
      background: rgba(15, 23, 42, 0.98);
      backdrop-filter: blur(30px);
      border-bottom: 1px solid rgba(0, 191, 255, 0.2);
      padding: 15px;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .topbar-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .topbar-left h2 {
      font-family: 'Poppins', sans-serif;
      font-size: 20px;
      font-weight: 800;
      background: linear-gradient(135deg, #00BFFF, #FFFFFF);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .topbar-subtitle {
      color: #94A3B8;
      font-size: 12px;
      margin-top: 4px;
    }

    .user-profile {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 12px;
      background: rgba(0, 191, 255, 0.15);
      border: 1px solid rgba(0, 191, 255, 0.3);
      border-radius: 10px;
    }

    .user-avatar {
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, #00BFFF, #0080FF);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 12px;
    }

    .user-info {
      display: flex;
      flex-direction: column;
    }

    .user-name {
      font-weight: 700;
      font-size: 13px;
      color: #E8EDF5;
    }

    .user-role {
      font-size: 11px;
      color: #94A3B8;
    }

    .content-area {
      padding: 15px;
      padding-bottom: 80px;
      overflow-y: auto;
    }

    /* Alert Banner */
    .alert-banner {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(220, 38, 38, 0.15));
      border: 1px solid rgba(239, 68, 68, 0.4);
      border-radius: 14px;
      padding: 15px;
      margin-bottom: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 12px;
      animation: alertPulse 2s ease-in-out infinite;
      cursor: pointer;
    }

    @keyframes alertPulse {

      0%,
      100% {
        box-shadow: 0 0 15px rgba(239, 68, 68, 0.3);
      }

      50% {
        box-shadow: 0 0 25px rgba(239, 68, 68, 0.6);
      }
    }

    .alert-icon {
      width: 40px;
      height: 40px;
      background: rgba(239, 68, 68, 0.3);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: shake 0.5s ease-in-out infinite;
    }

    @keyframes shake {

      0%,
      100% {
        transform: translateX(0);
      }

      25% {
        transform: translateX(-2px);
      }

      75% {
        transform: translateX(2px);
      }
    }

    .alert-content {
      flex: 1;
    }

    .alert-title {
      font-weight: 800;
      font-size: 14px;
      color: #FCA5A5;
      margin-bottom: 5px;
      font-family: 'Poppins', sans-serif;
    }

    .alert-text {
      color: #E8EDF5;
      font-size: 12px;
      line-height: 1.5;
    }

    /* Stats Grid */
    .stats-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 15px;
      margin-bottom: 20px;
    }

    .stat-card {
      background: rgba(15, 23, 42, 0.98);
      backdrop-filter: blur(30px);
      border: 1px solid rgba(0, 191, 255, 0.3);
      border-radius: 14px;
      padding: 20px;
      position: relative;
      overflow: hidden;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background: linear-gradient(90deg, #00BFFF, #0080FF);
    }

    .stat-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .stat-label {
      color: #94A3B8;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .stat-icon {
      width: 45px;
      height: 45px;
      background: rgba(0, 191, 255, 0.2);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid rgba(0, 191, 255, 0.3);
    }

    .stat-value {
      font-family: 'Poppins', sans-serif;
      font-size: 36px;
      font-weight: 800;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #00BFFF, #FFFFFF);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .stat-change {
      font-size: 12px;
      color: #22C55E;
      display: flex;
      align-items: center;
      gap: 5px;
      font-weight: 600;
    }

    /* Section Styles */
    .section {
      display: none;
    }

    .section.active {
      display: block;
    }

    /* Upload Section */
    .upload-tabs {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-bottom: 15px;
    }

    .upload-tab {
      padding: 12px 14px;
      background: rgba(15, 23, 42, 0.98);
      border: 2px solid rgba(0, 191, 255, 0.3);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      color: #94A3B8;
      font-weight: 700;
      font-size: 12px;
    }

    .upload-tab.active {
      background: rgba(0, 191, 255, 0.25);
      border-color: #00BFFF;
      color: #00BFFF;
      box-shadow: 0 0 20px rgba(0, 191, 255, 0.4);
    }

    .upload-area {
      background: rgba(15, 23, 42, 0.98);
      border: 3px dashed rgba(0, 191, 255, 0.4);
      border-radius: 14px;
      padding: 30px 20px;
      text-align: center;
      cursor: pointer;
    }

    .upload-icon {
      width: 50px;
      height: 50px;
      margin: 0 auto 15px;
      background: rgba(0, 191, 255, 0.2);
      border: 1px solid rgba(0, 191, 255, 0.3);
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .upload-title {
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
      font-weight: 800;
      margin-bottom: 8px;
      color: #E8EDF5;
    }

    .upload-subtitle {
      color: #94A3B8;
      font-size: 12px;
      margin-bottom: 15px;
    }

    .upload-formats {
      display: flex;
      justify-content: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .format-badge {
      padding: 6px 12px;
      background: rgba(0, 191, 255, 0.15);
      border: 1px solid rgba(0, 191, 255, 0.3);
      border-radius: 8px;
      color: #00BFFF;
      font-size: 10px;
      font-weight: 700;
    }

    /* Processing Panel */
    .processing-panel {
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(0, 191, 255, 0.3);
      border-radius: 14px;
      padding: 20px;
      display: none;
      margin-bottom: 20px;
    }

    .processing-panel.active {
      display: block;
      animation: slideIn 0.5s ease-out;
    }

    .processing-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .ai-spinner {
      width: 35px;
      height: 35px;
      border: 3px solid rgba(0, 191, 255, 0.2);
      border-top-color: #00BFFF;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    .processing-text {
      font-family: 'Poppins', sans-serif;
      font-size: 15px;
      font-weight: 700;
      color: #E8EDF5;
    }

    .processing-steps {
      margin-bottom: 20px;
    }

    .processing-step {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 14px;
      background: rgba(0, 191, 255, 0.1);
      border-left: 3px solid rgba(0, 191, 255, 0.3);
      border-radius: 8px;
      margin-bottom: 10px;
      color: #94A3B8;
      font-size: 12px;
      font-weight: 600;
    }

    .processing-step.active {
      border-left-color: #00BFFF;
      background: rgba(0, 191, 255, 0.2);
      color: #00BFFF;
    }

    .processing-step.complete {
      border-left-color: #22C55E;
      background: rgba(34, 197, 94, 0.15);
      color: #22C55E;
    }

    .step-icon {
      width: 18px;
      height: 18px;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: rgba(0, 191, 255, 0.2);
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 15px;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #00BFFF, #0080FF);
      border-radius: 8px;
      transition: width 0.5s ease;
      box-shadow: 0 0 15px rgba(0, 191, 255, 0.6);
    }

    .progress-text {
      text-align: center;
      color: #00BFFF;
      font-size: 13px;
      font-weight: 700;
    }

    /* CCTV Feed */
    .cctv-container {
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(0, 191, 255, 0.3);
      border-radius: 14px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .cctv-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .cctv-title {
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
      font-weight: 800;
      color: #E8EDF5;
    }

    .live-indicator {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 14px;
      background: rgba(239, 68, 68, 0.2);
      border: 1px solid rgba(239, 68, 68, 0.4);
      border-radius: 8px;
      color: #FCA5A5;
      font-weight: 700;
      font-size: 11px;
    }

    .live-dot {
      width: 8px;
      height: 8px;
      background: #EF4444;
      border-radius: 50%;
      animation: pulseDot 1.5s infinite;
    }

    @keyframes pulseDot {

      0%,
      100% {
        opacity: 1;
        box-shadow: 0 0 10px #EF4444;
      }

      50% {
        opacity: 0.4;
        box-shadow: 0 0 20px #EF4444;
      }
    }

    .cctv-feed {
      position: relative;
      width: 100%;
      height: 250px;
      background: #000000;
      border-radius: 12px;
      overflow: hidden;
      border: 2px solid rgba(0, 191, 255, 0.3);
    }

    .cctv-video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: grayscale(100%) contrast(1.2);
    }

    .cctv-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .scan-line {
      position: absolute;
      width: 100%;
      height: 2px;
      background: linear-gradient(90deg, transparent, #00BFFF, transparent);
      animation: scan 3s linear infinite;
      box-shadow: 0 0 15px #00BFFF;
    }

    @keyframes scan {
      0% {
        top: 0;
      }

      100% {
        top: 100%;
      }
    }

    .detection-box {
      position: absolute;
      border: 2px solid #00BFFF;
      border-radius: 6px;
      box-shadow: 0 0 15px rgba(0, 191, 255, 0.6);
      animation: boxPulse 2s ease-in-out infinite;
    }

    @keyframes boxPulse {

      0%,
      100% {
        border-color: #00BFFF;
      }

      50% {
        border-color: #00FF88;
      }
    }

    .detection-label {
      position: absolute;
      top: -25px;
      left: 0;
      padding: 4px 10px;
      background: rgba(0, 191, 255, 0.95);
      color: white;
      font-size: 10px;
      font-weight: 700;
      border-radius: 5px;
      white-space: nowrap;
    }

    .cctv-info {
      position: absolute;
      bottom: 10px;
      left: 10px;
      right: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding: 10px 12px;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(10px);
      border-radius: 8px;
      border: 1px solid rgba(0, 191, 255, 0.3);
    }

    .cctv-location {
      color: #00BFFF;
      font-weight: 700;
      font-size: 11px;
    }

    .cctv-timestamp {
      color: #94A3B8;
      font-size: 10px;
      font-family: 'Courier New', monospace;
    }

    /* Match Result */
    .comparison-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 20px;
    }

    .comparison-card {
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(0, 191, 255, 0.3);
      border-radius: 14px;
      padding: 15px;
    }

    .comparison-header {
      font-size: 11px;
      font-weight: 800;
      color: #00BFFF;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 12px;
      text-align: center;
    }

    .comparison-image {
      width: 100%;
      height: 180px;
      background: linear-gradient(135deg, rgba(0, 191, 255, 0.3), rgba(0, 128, 255, 0.2));
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 60px;
      margin-bottom: 12px;
      position: relative;
      overflow: hidden;
    }

    .comparison-image::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(0deg,
          transparent,
          transparent 2px,
          rgba(0, 191, 255, 0.1) 2px,
          rgba(0, 191, 255, 0.1) 4px);
    }

    .comparison-info {
      color: #E8EDF5;
      font-size: 10px;
      line-height: 1.6;
    }

    .comparison-info strong {
      color: #00BFFF;
      font-weight: 700;
    }

    /* AI Analysis */
    .ai-analysis {
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(0, 191, 255, 0.3);
      border-radius: 14px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .analysis-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 15px;
    }

    .analysis-title {
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
      font-weight: 800;
      color: #E8EDF5;
    }

    .analysis-content {
      color: #94A3B8;
      font-size: 13px;
      line-height: 1.7;
      margin-bottom: 20px;
    }

    .analysis-content strong {
      color: #00BFFF;
      font-weight: 700;
    }

    .metrics-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-bottom: 20px;
    }

    .metric-item {
      padding: 14px;
      background: rgba(0, 191, 255, 0.1);
      border: 1px solid rgba(0, 191, 255, 0.3);
      border-radius: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .metric-icon {
      width: 16px;
      height: 16px;
      color: #22C55E;
    }

    .metric-text {
      font-size: 13px;
      color: #E8EDF5;
      font-weight: 600;
    }

    .confidence-bar {
      margin-bottom: 20px;
    }

    .confidence-label {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      font-weight: 700;
      color: #E8EDF5;
      font-size: 13px;
    }

    .confidence-value {
      color: #00BFFF;
      font-size: 20px;
      font-family: 'Poppins', sans-serif;
    }

    .confidence-progress {
      width: 100%;
      height: 12px;
      background: rgba(0, 191, 255, 0.2);
      border-radius: 8px;
      overflow: hidden;
    }

    .confidence-fill {
      height: 100%;
      background: linear-gradient(90deg, #00BFFF, #22C55E);
      border-radius: 8px;
      box-shadow: 0 0 15px rgba(0, 191, 255, 0.6);
      animation: fillBar 2s ease-out;
    }

    @keyframes fillBar {
      from {
        width: 0;
      }
    }

    /* Decision Buttons */
    .decision-buttons {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .decision-btn {
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 12px;
      font-weight: 800;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-family: 'Poppins', sans-serif;
    }

    .confirm-btn {
      background: linear-gradient(135deg, #22C55E, #16A34A);
      color: white;
      box-shadow: 0 6px 20px rgba(34, 197, 94, 0.5);
    }

    .reject-btn {
      background: rgba(239, 68, 68, 0.2);
      color: #EF4444;
      border: 2px solid rgba(239, 68, 68, 0.4);
    }

    .verify-btn {
      background: rgba(0, 191, 255, 0.2);
      color: #00BFFF;
      border: 2px solid rgba(0, 191, 255, 0.4);
    }

    /* AI Assistant */
    .chat-panel {
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(0, 191, 255, 0.3);
      border-radius: 14px;
      padding: 20px;
      height: 500px;
      display: flex;
      flex-direction: column;
      margin-bottom: 20px;
    }

    .chat-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid rgba(0, 191, 255, 0.2);
    }

    .chat-title {
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
      font-weight: 800;
      color: #E8EDF5;
    }

    .chat-messages {
      flex: 1;
      overflow-y: auto;
      margin-bottom: 15px;
      padding-right: 8px;
    }

    .chat-message {
      margin-bottom: 15px;
      display: flex;
      gap: 10px;
      animation: messageSlide 0.3s ease-out;
    }

    @keyframes messageSlide {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .message-avatar {
      width: 35px;
      height: 35px;
      background: linear-gradient(135deg, #00BFFF, #0080FF);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .message-content {
      flex: 1;
    }

    .message-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .message-sender {
      font-weight: 800;
      font-size: 13px;
      color: #E8EDF5;
    }

    .message-time {
      color: #64748B;
      font-size: 10px;
    }

    .message-text {
      background: rgba(0, 191, 255, 0.15);
      border: 1px solid rgba(0, 191, 255, 0.3);
      padding: 12px 14px;
      border-radius: 12px;
      font-size: 12px;
      line-height: 1.6;
      color: #E8EDF5;
    }

    .message-text strong {
      color: #00BFFF;
      font-weight: 700;
    }

    .chat-input-area {
      display: flex;
      gap: 10px;
    }

    .chat-input {
      flex: 1;
      padding: 12px 14px;
      background: rgba(10, 14, 39, 0.8);
      border: 1px solid rgba(0, 191, 255, 0.3);
      border-radius: 10px;
      color: #E8EDF5;
      font-size: 13px;
    }

    .chat-input:focus {
      outline: none;
      border-color: #00BFFF;
      box-shadow: 0 0 0 3px rgba(0, 191, 255, 0.2);
    }

    .send-btn {
      padding: 12px 20px;
      background: linear-gradient(135deg, #00BFFF, #0080FF);
      border: none;
      border-radius: 10px;
      color: white;
      font-weight: 800;
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
      font-size: 13px;
    }

    .suggestions-panel {
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(0, 191, 255, 0.3);
      border-radius: 14px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .suggestions-title {
      font-family: 'Poppins', sans-serif;
      font-size: 15px;
      font-weight: 800;
      color: #E8EDF5;
      margin-bottom: 15px;
    }

    .suggestion-item {
      padding: 12px 14px;
      background: rgba(0, 191, 255, 0.1);
      border: 1px solid rgba(0, 191, 255, 0.3);
      border-radius: 10px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 12px;
      color: #94A3B8;
      font-weight: 600;
    }

    .suggestion-item:active {
      background: rgba(0, 191, 255, 0.2);
      color: #00BFFF;
    }

    /* Reports */
    .reports-container {
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(0, 191, 255, 0.3);
      border-radius: 14px;
      overflow: hidden;
    }

    .table-header {
      display: flex;
      flex-direction: column;
      gap: 12px;
      padding: 20px;
      border-bottom: 1px solid rgba(0, 191, 255, 0.2);
    }

    .table-title {
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
      font-weight: 800;
      color: #E8EDF5;
    }

    .export-btn {
      width: 100%;
      padding: 12px;
      background: rgba(0, 191, 255, 0.2);
      border: 1px solid rgba(0, 191, 255, 0.4);
      border-radius: 10px;
      color: #00BFFF;
      font-weight: 700;
      cursor: pointer;
      font-size: 13px;
    }

    .report-card {
      padding: 15px 20px;
      border-bottom: 1px solid rgba(0, 191, 255, 0.15);
    }

    .report-card:last-child {
      border-bottom: none;
    }

    .report-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .report-id {
      font-weight: 800;
      font-size: 14px;
      color: #E8EDF5;
    }

    .status-badge {
      padding: 6px 12px;
      border-radius: 8px;
      font-size: 10px;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .status-verified {
      background: rgba(34, 197, 94, 0.2);
      color: #22C55E;
    }

    .status-pending {
      background: rgba(251, 191, 36, 0.2);
      color: #FBBF24;
    }

    .report-details {
      color: #94A3B8;
      font-size: 12px;
      line-height: 1.6;
      margin-bottom: 10px;
    }

    .report-details strong {
      color: #E8EDF5;
    }

    .action-btn {
      width: 100%;
      padding: 10px;
      background: rgba(0, 191, 255, 0.2);
      border: 1px solid rgba(0, 191, 255, 0.3);
      border-radius: 8px;
      color: #00BFFF;
      font-weight: 700;
      cursor: pointer;
      font-size: 12px;
    }

    /* Chart */
    .chart-container {
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(0, 191, 255, 0.3);
      border-radius: 14px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .chart-title {
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
      font-weight: 800;
      color: #E8EDF5;
      margin-bottom: 15px;
    }

    .chart-bars {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .chart-bar-item {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .chart-label {
      font-size: 12px;
      font-weight: 600;
      color: #94A3B8;
    }

    .chart-bar-bg {
      width: 100%;
      height: 28px;
      background: rgba(0, 191, 255, 0.1);
      border-radius: 8px;
      overflow: hidden;
      position: relative;
    }

    .chart-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, #00BFFF, #0080FF);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-right: 12px;
      color: white;
      font-weight: 800;
      font-size: 11px;
      box-shadow: 0 0 15px rgba(0, 191, 255, 0.5);
      animation: barGrow 1.5s ease-out;
    }

    @keyframes barGrow {
      from {
        width: 0;
      }
    }

    /* Success Notification */
    .success-notification {
      position: fixed;
      top: 20px;
      left: 15px;
      right: 15px;
      padding: 15px 20px;
      background: rgba(34, 197, 94, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(34, 197, 94, 0.5);
      border-radius: 12px;
      color: white;
      font-weight: 700;
      font-size: 13px;
      box-shadow: 0 10px 35px rgba(34, 197, 94, 0.5);
      z-index: 2000;
      display: none;
      animation: slideInDown 0.4s ease-out;
    }

    @keyframes slideInDown {
      from {
        transform: translateY(-100px);
        opacity: 0;
      }

      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .success-notification.active {
      display: block;
    }

    /* Parental Data Section */
    .parental-upload-container {
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(251, 191, 36, 0.3);
      border-radius: 14px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .parental-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
    }

    .parental-title {
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
      font-weight: 800;
      color: #FBBF24;
    }

    .parental-subtitle {
      color: #94A3B8;
      font-size: 12px;
      line-height: 1.6;
      margin-bottom: 20px;
    }

    .parent-upload-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 15px;
    }

    .parent-upload-card {
      background: rgba(251, 191, 36, 0.1);
      border: 1px solid rgba(251, 191, 36, 0.3);
      border-radius: 12px;
      padding: 15px;
    }

    .parent-label {
      font-weight: 700;
      font-size: 13px;
      color: #FBBF24;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
  </style>
  <style>
    @view-transition {
      navigation: auto;
    }
  </style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
</head>

<body>
  <div class="animated-bg"></div>
  <div class="grid-overlay"></div>
  <div class="glow-orb orb-1"></div>
  <div class="glow-orb orb-2"></div><!-- Login Page -->
  <div class="login-page" id="loginPage">
    <div class="login-container">
      <div class="logo-container">
        <div class="logo-badge">
          <svg viewbox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
            <circle cx="12" cy="10" r="3" />
          </svg>
        </div>
        <h1 class="login-title">AI Identification Portal</h1>
        <p class="login-subtitle">Tamil Nadu Police – Missing Person &amp; Unidentified Body Identification</p>
      </div>
      <form id="loginForm">
        <div class="form-group"><label class="form-label" for="loginEmail">Email Address</label> <input type="email"
            id="loginEmail" class="form-input" placeholder="officer@tnpolice.gov.in" required>
        </div>
        <div class="form-group"><label class="form-label" for="loginPassword">Password</label> <input type="password"
            id="loginPassword" class="form-input" placeholder="Enter password" required>
        </div>
        <div class="form-group"><label class="form-label" for="loginRole">Select Role</label> <select id="loginRole"
            class="form-select" required>
            <option value="admin">Admin</option>
            <option value="investigator">Investigator</option>
            <option value="analyst">Analyst</option>
          </select>
        </div><button type="submit" class="login-btn">Access System</button>
      </form>
      <div class="login-footer">
        <svg width="16" height="16" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
          <path d="M7 11V7a5 5 0 0 1 10 0v4" />
        </svg> Secure Access – Authorized Personnel Only
      </div>
    </div>
  </div><!-- Dashboard -->
  <div class="dashboard" id="dashboard">
    <div class="topbar">
      <div class="topbar-content">
        <div class="topbar-left">
          <h2 id="pageTitle">Dashboard</h2>
          <p class="topbar-subtitle">Welcome back, Officer</p>
        </div>
        <div class="user-profile">
          <div class="user-avatar">
            PR
          </div>
          <div class="user-info">
            <div class="user-name">
              Priya R
            </div>
            <div class="user-role" id="userRoleDisplay">
              Admin
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="content-area"><!-- Dashboard Section -->
      <section class="section active" id="dashboardSection">
        <div class="alert-banner" onclick="navigateTo('match')">
          <div class="alert-icon">
            <svg width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="#FCA5A5" stroke-width="2.5">
              <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" />
              <line x1="12" y1="9" x2="12" y2="13" />
              <line x1="12" y1="17" x2="12.01" y2="17" />
            </svg>
          </div>
          <div class="alert-content">
            <div class="alert-title">
              ⚠️ New Match Detected
            </div>
            <div class="alert-text">
              Face Similarity 92% – Anna Nagar CCTV-Feed-07
            </div>
          </div>
        </div>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-header"><span class="stat-label">Total Cases Processed</span>
              <div class="stat-icon">
                <svg width="22" height="22" viewbox="0 0 24 24" fill="none" stroke="#00BFFF" stroke-width="2">
                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                  <polyline points="14 2 14 8 20 8" />
                </svg>
              </div>
            </div>
            <div class="stat-value">
              1,023
            </div>
            <div class="stat-change">
              <svg width="14" height="14" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="18 15 12 9 6 15" />
              </svg> +15% this month
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-header"><span class="stat-label">Matches Found</span>
              <div class="stat-icon">
                <svg width="22" height="22" viewbox="0 0 24 24" fill="none" stroke="#00BFFF" stroke-width="2">
                  <polyline points="20 6 9 17 4 12" />
                </svg>
              </div>
            </div>
            <div class="stat-value">
              57
            </div>
            <div class="stat-change">
              <svg width="14" height="14" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="18 15 12 9 6 15" />
              </svg> +8% this month
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-header"><span class="stat-label">Active CCTV Streams</span>
              <div class="stat-icon">
                <svg width="22" height="22" viewbox="0 0 24 24" fill="none" stroke="#00BFFF" stroke-width="2">
                  <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z" />
                  <circle cx="12" cy="13" r="4" />
                </svg>
              </div>
            </div>
            <div class="stat-value">
              12
            </div>
            <div class="stat-change">
              <svg width="14" height="14" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="18 15 12 9 6 15" />
              </svg> Live monitoring
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-header"><span class="stat-label">Pending Verifications</span>
              <div class="stat-icon">
                <svg width="22" height="22" viewbox="0 0 24 24" fill="none" stroke="#00BFFF" stroke-width="2">
                  <circle cx="12" cy="12" r="10" />
                  <polyline points="12 6 12 12 16 14" />
                </svg>
              </div>
            </div>
            <div class="stat-value">
              9
            </div>
            <div class="stat-change">
              <svg width="14" height="14" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="18 15 12 9 6 15" />
              </svg> Requires attention
            </div>
          </div>
        </div>
        <div class="chart-container">
          <h3 class="chart-title">Match Sources</h3>
          <div class="chart-bars">
            <div class="chart-bar-item">
              <div class="chart-label">
                Facial Recognition
              </div>
              <div class="chart-bar-bg">
                <div class="chart-bar-fill" style="width: 65%;">
                  65%
                </div>
              </div>
            </div>
            <div class="chart-bar-item">
              <div class="chart-label">
                Dental Records
              </div>
              <div class="chart-bar-bg">
                <div class="chart-bar-fill" style="width: 20%;">
                  20%
                </div>
              </div>
            </div>
            <div class="chart-bar-item">
              <div class="chart-label">
                Skeletal Analysis
              </div>
              <div class="chart-bar-bg">
                <div class="chart-bar-fill" style="width: 10%;">
                  10%
                </div>
              </div>
            </div>
            <div class="chart-bar-item">
              <div class="chart-label">
                Mixed Methods
              </div>
              <div class="chart-bar-bg">
                <div class="chart-bar-fill" style="width: 5%;">
                  5%
                </div>
              </div>
            </div>
          </div>
        </div>
      </section><!-- Upload Section -->
      <section class="section" id="uploadSection">
        <div class="section-header"
          style="background: rgba(15, 23, 42, 0.98); border: 1px solid rgba(0, 191, 255, 0.3); border-radius: 14px; padding: 20px; margin-bottom: 20px;">
          <h3
            style="font-family: 'Poppins', sans-serif; font-size: 18px; font-weight: 800; color: #E8EDF5; margin-bottom: 8px;">
            Upload Case Data</h3>
          <p style="color: #94A3B8; font-size: 12px; line-height: 1.5;">Upload missing person/unidentified body data and
            suspected match data for AI comparison</p>
        </div><!-- Missing Person / Dead Body Upload -->
        <div
          style="background: rgba(15, 23, 42, 0.98); border: 1px solid rgba(0, 191, 255, 0.3); border-radius: 14px; padding: 20px; margin-bottom: 20px;">
          <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
            <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="#00BFFF" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
              <circle cx="12" cy="7" r="4" />
            </svg>
            <h4 style="font-family: 'Poppins', sans-serif; font-size: 15px; font-weight: 800; color: #00BFFF;">Missing
              Person / Unidentified Body</h4>
          </div>
          <div class="upload-tabs">
            <div class="upload-tab active" data-type="missing-image" data-category="missing">
              <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                <circle cx="8.5" cy="8.5" r="1.5" />
                <polyline points="21 15 16 10 5 21" />
              </svg> Image
            </div>
            <div class="upload-tab" data-type="missing-video" data-category="missing">
              <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="23 7 16 12 23 17 23 7" />
                <rect x="1" y="5" width="15" height="14" rx="2" ry="2" />
              </svg> Video
            </div>
            <div class="upload-tab" data-type="missing-forensic" data-category="missing"
              onclick="navigateTo('forensic')">
              <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 12h-4l-3 9L9 3l-3 9H2" />
              </svg> Forensic
            </div>
          </div>
          <div class="upload-area" onclick="uploadMissingData()" style="margin-top: 15px;">
            <div class="upload-icon">
              <svg width="30" height="30" viewbox="0 0 24 24" fill="none" stroke="#00BFFF" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="17 8 12 3 7 8" />
                <line x1="12" y1="3" x2="12" y2="15" />
              </svg>
            </div>
            <h3 class="upload-title" style="font-size: 16px;">Upload Missing Person Data</h3>
            <p class="upload-subtitle" style="font-size: 12px;">JPG, PNG, MP4, DICOM, STL</p>
          </div>
        </div><!-- Suspected Match Upload -->
        <div
          style="background: rgba(15, 23, 42, 0.98); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 14px; padding: 20px; margin-bottom: 20px;">
          <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
            <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="#22C55E" stroke-width="2">
              <circle cx="11" cy="11" r="8" />
              <path d="m21 21-4.35-4.35" />
            </svg>
            <h4 style="font-family: 'Poppins', sans-serif; font-size: 15px; font-weight: 800; color: #22C55E;">Suspected
              Match Data</h4>
          </div>
          <div class="upload-tabs">
            <div class="upload-tab active" data-type="suspect-image" data-category="suspect">
              <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                <circle cx="8.5" cy="8.5" r="1.5" />
                <polyline points="21 15 16 10 5 21" />
              </svg> Image
            </div>
            <div class="upload-tab" data-type="suspect-video" data-category="suspect">
              <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="23 7 16 12 23 17 23 7" />
                <rect x="1" y="5" width="15" height="14" rx="2" ry="2" />
              </svg> Video
            </div>
          </div>
          <div class="upload-area" onclick="uploadSuspectData()"
            style="margin-top: 15px; border-color: rgba(34, 197, 94, 0.4);">
            <div class="upload-icon" style="background: rgba(34, 197, 94, 0.2); border-color: rgba(34, 197, 94, 0.3);">
              <svg width="30" height="30" viewbox="0 0 24 24" fill="none" stroke="#22C55E" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="17 8 12 3 7 8" />
                <line x1="12" y1="3" x2="12" y2="15" />
              </svg>
            </div>
            <h3 class="upload-title" style="font-size: 16px;">Upload Suspected Match</h3>
            <p class="upload-subtitle" style="font-size: 12px;">JPG, PNG, MP4, AVI</p>
          </div>
        </div><!-- Matching Options -->
        <div
          style="background: rgba(15, 23, 42, 0.98); border: 1px solid rgba(0, 191, 255, 0.3); border-radius: 14px; padding: 20px; margin-bottom: 20px;">
          <h4
            style="font-family: 'Poppins', sans-serif; font-size: 15px; font-weight: 800; color: #E8EDF5; margin-bottom: 15px;">
            Select Matching Method</h4>
          <div style="display: flex; flex-direction: column; gap: 12px;"><button class="decision-btn"
              style="background: rgba(0, 191, 255, 0.2); color: #00BFFF; border: 2px solid rgba(0, 191, 255, 0.4); display: flex; align-items: center; gap: 10px; justify-content: center;"
              onclick="matchWithCCTV()">
              <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z" />
                <circle cx="12" cy="13" r="4" />
              </svg> Match with Real-Time CCTV </button> <button class="decision-btn"
              style="background: rgba(34, 197, 94, 0.2); color: #22C55E; border: 2px solid rgba(34, 197, 94, 0.4); display: flex; align-items: center; gap: 10px; justify-content: center;"
              onclick="matchWithSuspect()">
              <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8" />
                <path d="m21 21-4.35-4.35" />
              </svg> Match with Suspected Upload </button>
          </div>
        </div>
        <div class="processing-panel" id="processingPanel">
          <div class="processing-header">
            <div class="ai-spinner"></div>
            <div class="processing-text">
              Processing...
            </div>
          </div>
          <div class="processing-steps">
            <div class="processing-step complete">
              <svg class="step-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12" />
              </svg> Face Enhancement Complete
            </div>
            <div class="processing-step complete">
              <svg class="step-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12" />
              </svg> Feature Extraction Complete
            </div>
            <div class="processing-step active">
              <div class="ai-spinner" style="width: 18px; height: 18px; border-width: 2px;"></div> Database Matching...
            </div>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
          </div>
          <div class="progress-text" id="progressText">
            0%
          </div>
        </div>
      </section><!-- Parental Data Section -->
      <section class="section" id="parentalSection">
        <!-- ... existing parental content ... -->
        <div class="parental-upload-container">
          <!-- (keeping existing content, just ensuring context is correct) -->
          <div class="parental-header">
            <svg width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="#FBBF24" stroke-width="2">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
              <circle cx="9" cy="7" r="4" />
              <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
              <path d="M16 3.13a4 4 0 0 1 0 7.75" />
            </svg>
            <h3 class="parental-title">Parental Data Upload</h3>
          </div>
          <p class="parental-subtitle">⚠️ <strong>AI Assistant Notice:</strong> The suspect data provided is unclear or
            insufficient for accurate matching. Please upload parental data (father and mother images) to improve
            identification accuracy through genetic facial feature analysis.</p>
          <div class="parent-upload-grid">
            <div class="parent-upload-card">
              <div class="parent-label">
                <svg width="18" height="18" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                  <circle cx="12" cy="7" r="4" />
                </svg> Father's Image
              </div>
              <div class="upload-area" onclick="uploadParentData('father')"
                style="border-color: rgba(251, 191, 36, 0.4); padding: 25px 15px;">
                <div class="upload-icon"
                  style="background: rgba(251, 191, 36, 0.2); border-color: rgba(251, 191, 36, 0.3); width: 45px; height: 45px; margin-bottom: 12px;">
                  <svg width="25" height="25" viewbox="0 0 24 24" fill="none" stroke="#FBBF24" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                    <polyline points="17 8 12 3 7 8" />
                    <line x1="12" y1="3" x2="12" y2="15" />
                  </svg>
                </div>
                <h3 class="upload-title" style="font-size: 14px;">Upload Father's Photo</h3>
                <p class="upload-subtitle" style="font-size: 11px;">JPG, PNG</p>
              </div>
            </div>
            <div class="parent-upload-card">
              <div class="parent-label">
                <svg width="18" height="18" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                  <circle cx="12" cy="7" r="4" />
                </svg> Mother's Image
              </div>
              <div class="upload-area" onclick="uploadParentData('mother')"
                style="border-color: rgba(251, 191, 36, 0.4); padding: 25px 15px;">
                <div class="upload-icon"
                  style="background: rgba(251, 191, 36, 0.2); border-color: rgba(251, 191, 36, 0.3); width: 45px; height: 45px; margin-bottom: 12px;">
                  <svg width="25" height="25" viewbox="0 0 24 24" fill="none" stroke="#FBBF24" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                    <polyline points="17 8 12 3 7 8" />
                    <line x1="12" y1="3" x2="12" y2="15" />
                  </svg>
                </div>
                <h3 class="upload-title" style="font-size: 14px;">Upload Mother's Photo</h3>
                <p class="upload-subtitle" style="font-size: 11px;">JPG, PNG</p>
              </div>
            </div>
          </div><button class="decision-btn confirm-btn" onclick="processParentalData()" style="margin-top: 20px;">
            Process Parental Data </button>
        </div>
      </section>

      <!-- Forensic Data Section -->
      <section class="section" id="forensicSection">
        <style>
          @keyframes fadeInUp {
            from {
              opacity: 0;
              transform: translateY(20px);
            }

            to {
              opacity: 1;
              transform: translateY(0);
            }
          }

          .forensic-card {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(124, 58, 237, 0.3);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            animation: fadeInUp 0.5s ease-out forwards;
            opacity: 0;
          }

          .forensic-card:hover {
            transform: translateY(-5px);
            border-color: #A78BFA;
            box-shadow: 0 10px 25px rgba(124, 58, 237, 0.2);
          }

          .forensic-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: #A78BFA;
            opacity: 0.5;
          }

          .forensic-icon {
            width: 40px;
            height: 40px;
            background: rgba(124, 58, 237, 0.15);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #A78BFA;
            margin-bottom: 15px;
          }

          .forensic-upload-btn {
            margin-top: 15px;
            width: 100%;
            background: transparent;
            border: 1px dashed rgba(124, 58, 237, 0.5);
            color: #E2E8F0;
            padding: 10px;
            border-radius: 6px;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 13px;
          }

          .forensic-upload-btn:hover {
            background: rgba(124, 58, 237, 0.1);
            border-color: #A78BFA;
            color: white;
          }

          /* Stagger animations */
          .forensic-card:nth-child(1) {
            animation-delay: 0.1s;
          }

          .forensic-card:nth-child(2) {
            animation-delay: 0.2s;
          }

          .forensic-card:nth-child(3) {
            animation-delay: 0.3s;
          }

          .forensic-card:nth-child(4) {
            animation-delay: 0.4s;
          }

          .forensic-card:nth-child(5) {
            animation-delay: 0.5s;
          }
        </style>

        <div class="section-header"
          style="background: rgba(15, 23, 42, 0.98); border: 1px solid rgba(124, 58, 237, 0.3); border-radius: 14px; padding: 20px; margin-bottom: 20px;">
          <h3
            style="font-family: 'Poppins', sans-serif; font-size: 18px; font-weight: 800; color: #A78BFA; margin-bottom: 8px; display: flex; align-items: center; gap: 10px;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 12h-4l-3 9L9 3l-3 9H2" />
            </svg>
            Forensic Data Entry
          </h3>
          <p style="color: #94A3B8; font-size: 13px; line-height: 1.5;">Select specific forensic data types and upload
            evidence for each category below.</p>
        </div>

        <div
          style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-bottom: 30px;">

          <!-- Mobile Photo -->
          <div class="forensic-card">
            <div class="forensic-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="5" y="2" width="14" height="20" rx="2" ry="2" />
                <line x1="12" y1="18" x2="12.01" y2="18" />
              </svg>
            </div>
            <h4 style="color: white; margin-bottom: 5px;">Mobile Photo</h4>
            <p style="color: #94A3B8; font-size: 12px; margin-bottom: 10px;">High-res images from scenes.</p>
            <input type="text" placeholder="Location / Details"
              style="width: 100%; background: #0F172A; border: 1px solid #334155; padding: 8px; border-radius: 6px; color: white; font-size: 12px; margin-bottom: 5px;">
            <button class="forensic-upload-btn"
              onclick="triggerFileUpload((f) => handleForensicUpload('Mobile Photo', f))">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="17 8 12 3 7 8" />
                <line x1="12" y1="3" x2="12" y2="15" />
              </svg>
              Upload Photo
            </button>
          </div>

          <!-- Mobile Video -->
          <div class="forensic-card">
            <div class="forensic-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="23 7 16 12 23 17 23 7" />
                <rect x="1" y="5" width="15" height="14" rx="2" ry="2" />
              </svg>
            </div>
            <h4 style="color: white; margin-bottom: 5px;">Mobile Video</h4>
            <p style="color: #94A3B8; font-size: 12px; margin-bottom: 10px;">Scene walkthroughs or clips.</p>
            <input type="text" placeholder="Time / Duration"
              style="width: 100%; background: #0F172A; border: 1px solid #334155; padding: 8px; border-radius: 6px; color: white; font-size: 12px; margin-bottom: 5px;">
            <button class="forensic-upload-btn"
              onclick="triggerFileUpload((f) => handleForensicUpload('Mobile Video', f))">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="17 8 12 3 7 8" />
                <line x1="12" y1="3" x2="12" y2="15" />
              </svg>
              Upload Video
            </button>
          </div>

          <!-- Post-mortem Image -->
          <div class="forensic-card">
            <div class="forensic-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18z" />
                <path d="M9 10h.01" />
                <path d="M15 10h.01" />
                <path d="M9.5 15a3.5 3.5 0 0 0 5 0" />
              </svg>
            </div>
            <h4 style="color: white; margin-bottom: 5px;">Post-mortem Image</h4>
            <p style="color: #94A3B8; font-size: 12px; margin-bottom: 10px;">Examination photography.</p>
            <input type="text" placeholder="Marks / Condition"
              style="width: 100%; background: #0F172A; border: 1px solid #334155; padding: 8px; border-radius: 6px; color: white; font-size: 12px; margin-bottom: 5px;">
            <button class="forensic-upload-btn"
              onclick="triggerFileUpload((f) => handleForensicUpload('Post-mortem Image', f))">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="17 8 12 3 7 8" />
                <line x1="12" y1="3" x2="12" y2="15" />
              </svg>
              Upload Image
            </button>
          </div>

          <!-- Dental X-ray -->
          <div class="forensic-card">
            <div class="forensic-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path
                  d="M8 2 C8 2 4 6 4 9 C4 11 5 12 6 12 C7 12 8 11 8 11 L8 21 C8 21 10 21 10 21 L10 11 C10 11 11 12 12 12 C13 12 16 12 16 12 L16 21 C16 21 18 21 18 21 L18 11 C18 11 19 12 20 12 C21 12 22 11 22 9 C22 6 18 2 18 2 L8 2 Z" />
              </svg>
            </div>
            <h4 style="color: white; margin-bottom: 5px;">Dental X-ray</h4>
            <p style="color: #94A3B8; font-size: 12px; margin-bottom: 10px;">Odontology records.</p>
            <input type="text" placeholder="Clinic / Date"
              style="width: 100%; background: #0F172A; border: 1px solid #334155; padding: 8px; border-radius: 6px; color: white; font-size: 12px; margin-bottom: 5px;">
            <button class="forensic-upload-btn"
              onclick="triggerFileUpload((f) => handleForensicUpload('Dental X-ray', f))">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="17 8 12 3 7 8" />
                <line x1="12" y1="3" x2="12" y2="15" />
              </svg>
              Upload X-Ray
            </button>
          </div>

          <!-- CT / Skeletal Scan -->
          <div class="forensic-card">
            <div class="forensic-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2v20M2 12h20M4.93 4.93l14.14 14.14M4.93 19.07l14.14-14.14" />
              </svg>
            </div>
            <h4 style="color: white; margin-bottom: 5px;">CT / Skeletal Scan</h4>
            <p style="color: #94A3B8; font-size: 12px; margin-bottom: 10px;">Bone structure analysis.</p>
            <input type="text" placeholder="Scan ID / Hospital"
              style="width: 100%; background: #0F172A; border: 1px solid #334155; padding: 8px; border-radius: 6px; color: white; font-size: 12px; margin-bottom: 5px;">
            <button class="forensic-upload-btn" onclick="triggerFileUpload((f) => handleForensicUpload('CT Scan', f))">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="17 8 12 3 7 8" />
                <line x1="12" y1="3" x2="12" y2="15" />
              </svg>
              Upload Scan
            </button>
          </div>

        </div>

        <div style="text-align: right; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px;">
          <button onclick="submitForensicData()"
            style="background: linear-gradient(135deg, #7C3AED 0%, #6D28D9 100%); color: white; border: none; padding: 12px 30px; border-radius: 30px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(124, 58, 237, 0.4); letter-spacing: 0.5px; transition: transform 0.2s;">
            PROCESS ALL UPLOADS ➔
          </button>
        </div>

      </section>
      <!-- CCTV Feed Section -->
      <section class="section" id="cctvSection">
        <div class="cctv-container" style="display: block;">
          <!-- Contextual Filter / Header -->
          <div class="cctv-header"
            style="flex-direction: column; align-items: flex-start; gap: 10px; margin-bottom: 20px;">
            <div style="display: flex; justify-content: space-between; width: 100%; align-items: center;">
              <h3 class="cctv-title">Surveillance Grid</h3>
              <div class="live-indicator">
                <div class="live-dot"></div> LIVE SYSTEM
              </div>
            </div>

            <!-- Route & Time Filter -->
            <div style="display: flex; flex-direction: column; gap: 10px; width: 100%; margin-top: 5px;">
              <div style="display: flex; gap: 10px; width: 100%; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 200px;">
                  <input type="text" id="routeSource" placeholder="Start Location (e.g. Anna Nagar)"
                    style="width: 100%; padding: 10px; background: rgba(15, 23, 42, 0.6); border: 1px solid rgba(0, 191, 255, 0.2); border-radius: 8px; color: white; font-family: 'Inter', sans-serif;">
                </div>
                <div style="flex: 1; min-width: 200px;">
                  <input type="text" id="routeDest" placeholder="End Location (e.g. Koyambedu)"
                    style="width: 100%; padding: 10px; background: rgba(15, 23, 42, 0.6); border: 1px solid rgba(0, 191, 255, 0.2); border-radius: 8px; color: white; font-family: 'Inter', sans-serif;">
                </div>
              </div>

              <div style="display: flex; gap: 10px; width: 100%; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 140px;">
                  <input type="date" id="cctvDate"
                    style="width: 100%; padding: 10px; background: rgba(15, 23, 42, 0.6); border: 1px solid rgba(0, 191, 255, 0.2); border-radius: 8px; color: white; color-scheme: dark; font-family: 'Inter', sans-serif;">
                </div>
                <div style="display: flex; flex: 1; gap: 10px; min-width: 200px;">
                  <input type="time" id="cctvStartTime"
                    style="width: 100%; padding: 10px; background: rgba(15, 23, 42, 0.6); border: 1px solid rgba(0, 191, 255, 0.2); border-radius: 8px; color: white; color-scheme: dark; font-family: 'Inter', sans-serif;">
                  <span style="align-self: center; color: #94A3B8;">to</span>
                  <input type="time" id="cctvEndTime"
                    style="width: 100%; padding: 10px; background: rgba(15, 23, 42, 0.6); border: 1px solid rgba(0, 191, 255, 0.2); border-radius: 8px; color: white; color-scheme: dark; font-family: 'Inter', sans-serif;">
                </div>
                <button onclick="findRouteCCTV()"
                  style="background: rgba(0, 191, 255, 0.2); color: #00BFFF; border: 1px solid rgba(0, 191, 255, 0.4); padding: 0 20px; border-radius: 8px; cursor: pointer; font-weight: 600; min-width: 100px;">
                  Search Grid
                </button>
              </div>
            </div>

            <!-- Context Filters (Reduced) -->
            <div class="context-filters"
              style="display: flex; gap: 15px; flex-wrap: wrap; width: 100%; margin-top: 5px;">
              <div class="filter-badge"
                style="background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); padding: 5px 12px; border-radius: 20px; font-size: 12px; color: #22C55E; display: flex; align-items: center; gap: 6px;">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                  <polyline points="7 10 12 15 17 10" />
                  <line x1="12" y1="15" x2="12" y2="3" />
                </svg>
                Digi-Track: Active
              </div>
            </div>
          </div>

          <!-- CCTV Table -->
          <div class="cctv-table-container"
            style="background: rgba(15, 23, 42, 0.6); border-radius: 12px; overflow: hidden; border: 1px solid rgba(255, 255, 255, 0.1);">
            <table style="width: 100%; border-collapse: collapse; color: #E2E8F0; font-size: 14px;">
              <thead>
                <tr style="background: rgba(30, 41, 59, 0.8); text-align: left; font-weight: 600; color: #94A3B8;">
                  <th style="padding: 12px 15px;">Camera ID</th>
                  <th style="padding: 12px 15px;">Location</th>
                  <th style="padding: 12px 15px;">Dist. from Last Seen</th>
                  <th style="padding: 12px 15px;">Status</th>
                  <th style="padding: 12px 15px;">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.05); transition: background 0.2s;">
                  <td style="padding: 12px 15px; font-family: monospace; color: #00BFFF;">CAM-07</td>
                  <td style="padding: 12px 15px;">Anna Nagar East - Signal</td>
                  <td style="padding: 12px 15px;">0.8 km</td>
                  <td style="padding: 12px 15px;"><span style="color: #22C55E;">● Live</span></td>
                  <td style="padding: 12px 15px;">
                    <button onclick="viewCCTV('CAM-07')"
                      style="background: rgba(0, 191, 255, 0.15); color: #00BFFF; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 500;">
                      View Feed
                    </button>
                  </td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                  <td style="padding: 12px 15px; font-family: monospace; color: #00BFFF;">CAM-12</td>
                  <td style="padding: 12px 15px;">Anna Nagar West - Park</td>
                  <td style="padding: 12px 15px;">1.2 km</td>
                  <td style="padding: 12px 15px;"><span style="color: #22C55E;">● Live</span></td>
                  <td style="padding: 12px 15px;">
                    <button onclick="viewCCTV('CAM-12')"
                      style="background: rgba(0, 191, 255, 0.15); color: #00BFFF; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 500;">
                      View Feed
                    </button>
                  </td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                  <td style="padding: 12px 15px; font-family: monospace; color: #00BFFF;">CAM-04</td>
                  <td style="padding: 12px 15px;">Koyambedu Bus Terminus</td>
                  <td style="padding: 12px 15px;">2.5 km</td>
                  <td style="padding: 12px 15px;"><span style="color: #FBBF24;">● Rec</span></td>
                  <td style="padding: 12px 15px;">
                    <button onclick="viewCCTV('CAM-04')"
                      style="background: rgba(0, 191, 255, 0.15); color: #00BFFF; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 500;">
                      View Footage
                    </button>
                  </td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                  <td style="padding: 12px 15px; font-family: monospace; color: #00BFFF;">CAM-21</td>
                  <td style="padding: 12px 15px;">VR Mall Entrance</td>
                  <td style="padding: 12px 15px;">3.1 km</td>
                  <td style="padding: 12px 15px;"><span style="color: #22C55E;">● Live</span></td>
                  <td style="padding: 12px 15px;">
                    <button onclick="viewCCTV('CAM-21')"
                      style="background: rgba(0, 191, 255, 0.15); color: #00BFFF; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 500;">
                      View Feed
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Video Modal / Placeholder (Hidden by default, shown on click) -->
          <div id="cctvPlayer"
            style="display: none; margin-top: 20px; background: black; border-radius: 12px; padding: 10px; border: 1px solid #333;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px; color: #fff;">
              <span id="cctvPlayerTitle">CAM-XX Feed</span>
              <button onclick="closeCCTV()" style="background: none; border: none; color: #EF4444; cursor: pointer;">✕
                Close</button>
            </div>
            <div class="cctv-feed" style="max-height: 400px; aspect-ratio: 16/9;">
              <div class="cctv-video"
                style="background: linear-gradient(135deg, #1a1a1a, #2a2a2a); display: flex; align-items: center; justify-content: center; font-size: 60px; height: 100%;">
                🎥
              </div>
              <div class="cctv-overlay">
                <div class="scan-line"></div>
                <div class="cctv-info">
                  <div class="cctv-location">📍 LIVE FEED</div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </section><!-- Match Result Section -->
      <section class="section" id="matchSection">
        <div class="comparison-grid">
          <div class="comparison-card">
            <div class="comparison-header">
              📤 Uploaded Image
            </div>
            <div class="comparison-image">
              <svg viewbox="0 0 200 240" xmlns="http://www.w3.org/2000/svg"><!-- Face outline -->
                <ellipse cx="100" cy="120" rx="60" ry="75" fill="#D4A574" stroke="#00BFFF" stroke-width="2" />
                <!-- Hair -->
                <ellipse cx="100" cy="70" rx="65" ry="45" fill="#2C1810" />
                <rect x="35" y="70" width="130" height="30" fill="#2C1810" /> <!-- Eyes -->
                <ellipse </svg>
            </div>
            <div class="comparison-info"><strong>File:</strong> Missing_Person_001.jpg<br><strong>Source:</strong>
              Family Report<br><strong>Date:</strong> 05-Nov-2025
            </div>
          </div>
          <div class="comparison-card">
            <div class="comparison-header">
              📹 CCTV Frame
            </div>
            <div class="comparison-image"
              style="background: linear-gradient(135deg, rgba(0, 0, 0, 0.8), rgba(26, 26, 26, 0.9)); position: relative;">
              <svg viewbox="0 0 200 240" xmlns="http://www.w3.org/2000/svg"
                style="filter: grayscale(60%) contrast(1.3);"><!-- Face outline - slightly different angle -->
                <ellipse cx="105" cy="120" rx="58" ry="73" fill="#D4A574" stroke="#00BFFF" stroke-width="2" />
                <!-- Hair -->
                <ellipse cx="105" cy="72" rx="63" ry="43" fill="#2C1810" />
                <rect x="42" y="72" width="126" height="28" fill="#2C1810" /> <!-- Eyes -->
                <ellipse cx="85" cy="112" rx="7" ry="11" fill="#1A1A1A" />
                <ellipse cx="123" cy="112" rx="7" ry="11" fill="#1A1A1A" />
                <circle cx="87" cy="110" r="2.5" fill="#FFFFFF" opacity="0.7" />
                <circle cx="125" cy="110" r="2.5" fill="#FFFFFF" opacity="0.7" /> <!-- Eyebrows -->
                <path d="M 75 102 Q 85 98 93 102" stroke="#2C1810" stroke-width="2.5" fill="none"
                  stroke-linecap="round" />
                <path d="M 113 102 Q 123 98 131 102" stroke="#2C1810" stroke-width="2.5" fill="none"
                  stroke-linecap="round" /> <!-- Nose -->
                <path d="M 105 117 L 100 136 L 105 139 L 110 136 Z" fill="#C49565" /> <!-- Mouth -->
                <path d="M 90 156 Q 105 161 120 156" stroke="#8B4513" stroke-width="2" fill="none"
                  stroke-linecap="round" /> <!-- Ears -->
                <ellipse cx="50" cy="122" rx="11" ry="19" fill="#D4A574" />
                <ellipse cx="160" cy="122" rx="11" ry="19" fill="#D4A574" /> <!-- Neck -->
                <rect x="85" y="185" width="40" height="55" fill="#D4A574" /> <!-- Shirt -->
                <path d="M 65 220 L 85 195 L 125 195 L 145 220 L 145 240 L 65 240 Z" fill="#374151" />
                <!-- Detection markers -->
                <circle cx="85" cy="112" r="4" fill="none" stroke="#00FF88" stroke-width="1.5" />
                <circle cx="123" cy="112" r="4" fill="none" stroke="#00FF88" stroke-width="1.5" />
                <circle cx="105" cy="136" r="4" fill="none" stroke="#00FF88" stroke-width="1.5" />
                <line x1="85" y1="112" x2="123" y2="112" stroke="#00BFFF" stroke-width="1" opacity="0.5" />
                <line x1="85" y1="112" x2="105" y2="136" stroke="#00BFFF" stroke-width="1" opacity="0.5" />
                <line x1="123" y1="112" x2="105" y2="136" stroke="#00BFFF" stroke-width="1" opacity="0.5" />
              </svg><!-- CCTV overlay effects -->
              <div
                style="position: absolute; top: 10px; left: 10px; color: #00FF88; font-size: 10px; font-family: 'Courier New', monospace; font-weight: 700;">
                REC ●
              </div>
              <div
                style="position: absolute; top: 10px; right: 10px; color: #00BFFF; font-size: 9px; font-family: 'Courier New', monospace;">
                18:32:47
              </div>
              <div
                style="position: absolute; bottom: 10px; left: 10px; right: 10px; height: 2px; background: linear-gradient(90deg, transparent, #00BFFF, transparent); opacity: 0.6;">
              </div>
            </div>
            <div class="comparison-info"><strong>File:</strong> Feed07_Frame12.png<br><strong>Location:</strong> Anna
              Nagar CCTV-07<br><strong>Time:</strong> 18:32 IST, 09-Nov-2025
            </div>
          </div>
        </div>
        <div class="ai-analysis">
          <div class="analysis-header">
            <svg width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="#00BFFF" stroke-width="2">
              <circle cx="12" cy="12" r="3" />
              <path d="M12 1v6m0 6v6" />
            </svg>
            <h3 class="analysis-title">AI Analysis – Case TN001</h3>
          </div>
          <div class="confidence-bar">
            <div class="confidence-label"><span>Match Confidence</span> <span class="confidence-value">92%</span>
            </div>
            <div class="confidence-progress">
              <div class="confidence-fill" style="width: 92%;"></div>
            </div>
          </div>
          <p class="analysis-content"><strong>AI Summary:</strong> Similarity detected in <strong>jawline
              structure</strong>, <strong>eye spacing</strong>, and <strong>nasal ridge pattern</strong>. The system
            analyzed <strong>128 facial landmarks</strong> and cross-referenced with <strong>skeletal correlation
              data</strong>.</p>
          <div class="metrics-grid">
            <div class="metric-item">
              <svg class="metric-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12" />
              </svg><span class="metric-text">Facial Match: 92%</span>
            </div>
            <div class="metric-item">
              <svg class="metric-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12" />
              </svg><span class="metric-text">Skeletal Correlation: 78%</span>
            </div>
            <div class="metric-item">
              <svg class="metric-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12" />
              </svg><span class="metric-text">Jawline &amp; Eye Spacing: 94%</span>
            </div>
            <div class="metric-item">
              <svg class="metric-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12" />
              </svg><span class="metric-text">Nasal Ridge Pattern: 89%</span>
            </div>
          </div>
        </div>
        <div class="decision-buttons"><button class="decision-btn confirm-btn" onclick="confirmMatch()">✓ Confirm
            Match</button> <button class="decision-btn reject-btn" onclick="rejectMatch()">✗ Reject Match</button>
          <button class="decision-btn verify-btn" onclick="requestVerification()">📋 Send for Verification</button>
        </div>
      </section><!-- AI Assistant Section -->
      <section class="section" id="assistantSection">
        <div class="chat-panel">
          <div class="chat-header">
            <svg width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="#00BFFF" stroke-width="2">
              <circle cx="12" cy="12" r="3" />
              <path d="M12 1v6m0 6v6" />
            </svg>
            <h3 class="chat-title">AI Legal Assistant</h3>
          </div>
          <div class="chat-messages" id="chatMessages">
            <div class="chat-message">
              <div class="message-avatar">
                <svg width="18" height="18" viewbox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                  <circle cx="12" cy="12" r="3" />
                  <path d="M12 1v6m0 6v6" />
                </svg>
              </div>
              <div class="message-content">
                <div class="message-header"><span class="message-sender">AI Assistant</span> <span
                    class="message-time">Just now</span>
                </div>
                <div class="message-text">
                  Hello! I'm your AI Legal Assistant. I can help analyze match results, generate reports, and provide
                  insights on case evidence.
                </div>
              </div>
            </div>
            <div class="chat-message">
              <div class="message-avatar" style="background: rgba(148, 163, 184, 0.3);">
                <svg width="18" height="18" viewbox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                  <circle cx="12" cy="7" r="4" />
                </svg>
              </div>
              <div class="message-content">
                <div class="message-header"><span class="message-sender">You</span> <span class="message-time">2 min
                    ago</span>
                </div>
                <div class="message-text">
                  Why was this match selected?
                </div>
              </div>
            </div>
            <div class="chat-message">
              <div class="message-avatar">
                <svg width="18" height="18" viewbox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                  <circle cx="12" cy="12" r="3" />
                  <path d="M12 1v6m0 6v6" />
                </svg>
              </div>
              <div class="message-content">
                <div class="message-header"><span class="message-sender">AI Assistant</span> <span
                    class="message-time">Just now</span>
                </div>
                <div class="message-text">
                  The AI model found a <strong>92% facial</strong> and <strong>78% skeletal similarity</strong>. Key
                  features include: <strong>eye spacing (94% match)</strong>, <strong>jaw curvature (93%
                    match)</strong>, and <strong>skull alignment (89% match)</strong>.
                </div>
              </div>
            </div>
          </div>
          <div class="chat-input-area"><input type="text" class="chat-input" placeholder="Ask about match details..."
              id="chatInput"> <button class="send-btn" onclick="sendChatMessage()">Send</button>
          </div>
        </div>
        <div class="suggestions-panel">
          <h4 class="suggestions-title">Quick Actions</h4>
          <div class="suggestion-item" onclick="askAI('Generate legal report')">
            📄 Generate Legal Report
          </div>
          <div class="suggestion-item" onclick="askAI('Explain confidence score')">
            📊 Explain Confidence Score
          </div>
          <div class="suggestion-item" onclick="askAI('Show similar cases')">
            🔍 Show Similar Cases
          </div>
          <div class="suggestion-item" onclick="askAI('Export evidence package')">
            💾 Export Evidence Package
          </div>
        </div>
      </section><!-- Reports Section -->
      <section class="section" id="reportsSection">
        <div class="reports-container">
          <div class="table-header">
            <h3 class="table-title">Investigation History</h3><button class="export-btn" onclick="exportReport()">📥
              Download PDF</button>
          </div>
          <div class="report-card">
            <div class="report-header"><span class="report-id">TN001</span> <span
                class="status-badge status-verified">Verified</span>
            </div>
            <div class="report-details"><strong>Date:</strong> 09-Nov-2025<br><strong>Officer:</strong> Inspector
              Priya
              R<br><strong>Type:</strong> Facial + Skeletal<br><strong>Confidence:</strong> 92%
            </div><button class="action-btn" onclick="downloadReport()">Download Report</button>
          </div>
          <div class="report-card">
            <div class="report-header"><span class="report-id">TN002</span> <span
                class="status-badge status-pending">Pending</span>
            </div>
            <div class="report-details"><strong>Date:</strong> 08-Nov-2025<br><strong>Officer:</strong> Officer Kumar
              S<br><strong>Type:</strong> Dental Records<br><strong>Confidence:</strong> 87%
            </div><button class="action-btn" onclick="downloadReport()">Download Report</button>
          </div>
          <div class="report-card">
            <div class="report-header"><span class="report-id">TN003</span> <span
                class="status-badge status-verified">Verified</span>
            </div>
            <div class="report-details"><strong>Date:</strong> 07-Nov-2025<br><strong>Officer:</strong> Inspector
              Priya
              R<br><strong>Type:</strong> Facial Recognition<br><strong>Confidence:</strong> 94%
            </div><button class="action-btn" onclick="downloadReport()">Download Report</button>
          </div>
        </div>
      </section>
    </div><!-- Mobile Navigation -->
    <nav class="mobile-nav">
      <div class="mobile-nav-item active" data-section="dashboard">
        <svg viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="7" height="7" />
          <rect x="14" y="3" width="7" height="7" />
          <rect x="14" y="14" width="7" height="7" />
          <rect x="3" y="14" width="7" height="7" />
        </svg><span>Home</span>
      </div>
      <div class="mobile-nav-item" data-section="upload">
        <svg viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
          <polyline points="17 8 12 3 7 8" />
          <line x1="12" y1="3" x2="12" y2="15" />
        </svg><span>Upload</span>
      </div>
      <div class="mobile-nav-item" data-section="cctv">
        <svg viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z" />
          <circle cx="12" cy="13" r="4" />
        </svg><span>CCTV</span>
      </div>
      <div class="mobile-nav-item" data-section="match">
        <svg viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8" />
          <path d="m21 21-4.35-4.35" />
        </svg><span>Match</span>
      </div>
      <div class="mobile-nav-item" data-section="assistant">
        <svg viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
        </svg><span>AI</span>
      </div>
      <div class="mobile-nav-item" data-section="reports">
        <svg viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
          <polyline points="14 2 14 8 20 8" />
        </svg><span>Reports</span>
      </div>
      <div class="mobile-nav-item" data-section="parentalAnalysis">
        <svg viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path
            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z" />
        </svg><span>Parental</span>
      </div>
    </nav>
  </div>

  <!-- Parental Analysis Section -->
  <section class="section" id="parentalAnalysisSection">
    <div
      style="background: rgba(15, 23, 42, 0.98); border: 1px solid rgba(251, 191, 36, 0.3); border-radius: 14px; padding: 20px; margin-bottom: 20px;">
      <h3
        style="font-family: 'Poppins', sans-serif; font-size: 18px; font-weight: 800; color: #FBBF24; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
        🧬 Scientific Basis: Heritable Facial Structure
      </h3>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
        <div
          style="background: rgba(34, 197, 94, 0.1); border-left: 3px solid #22C55E; padding: 10px; border-radius: 6px;">
          <div style="font-weight: 700; color: #22C55E; margin-bottom: 5px; font-size: 12px;">✓ USED TRAITS</div>
          <ul style="list-style: none; color: #E2E8F0; font-size: 11px; padding: 0;">
            <li style="margin-bottom: 3px;">• Craniofacial bone structure</li>
            <li style="margin-bottom: 3px;">• Jaw shape & angles</li>
            <li style="margin-bottom: 3px;">• Inter-ocular distance</li>
            <li style="margin-bottom: 3px;">• Nose bridge geometry</li>
          </ul>
        </div>
        <div
          style="background: rgba(239, 68, 68, 0.1); border-left: 3px solid #EF4444; padding: 10px; border-radius: 6px;">
          <div style="font-weight: 700; color: #EF4444; margin-bottom: 5px; font-size: 12px;">✗ NOT USED</div>
          <ul style="list-style: none; color: #E2E8F0; font-size: 11px; padding: 0;">
            <li style="margin-bottom: 3px;">• Skin tone</li>
            <li style="margin-bottom: 3px;">• Eye/hair color</li>
            <li style="margin-bottom: 3px;">• Scars or tattoos</li>
            <li style="margin-bottom: 3px;">• Facial expressions</li>
          </ul>
        </div>
      </div>

      <div
        style="font-size: 11px; color: #94A3B8; font-style: italic; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 10px;">
        ⚠️ Important: This analysis infers only bone-driven structural geometry, not appearance. Output is a constrained
        hypothesis used to improve matching.
      </div>
    </div>

    <!-- Upload Parents -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
      <div class="upload-area" onclick="uploadParentData('father')"
        style="padding: 20px 10px; border-color: rgba(251, 191, 36, 0.4);">
        <div class="upload-icon" style="background: rgba(251, 191, 36, 0.15); border-color: rgba(251, 191, 36, 0.3);">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#FBBF24" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="16"></line>
            <line x1="8" y1="12" x2="16" y2="12"></line>
          </svg>
        </div>
        <h4 style="color: #FBBF24; font-size: 13px; font-weight: 700;">Father's Image</h4>
        <div id="fatherStatus" style="font-size: 10px; color: #94A3B8;">Not Selected</div>
      </div>
      <div class="upload-area" onclick="uploadParentData('mother')"
        style="padding: 20px 10px; border-color: rgba(251, 191, 36, 0.4);">
        <div class="upload-icon" style="background: rgba(251, 191, 36, 0.15); border-color: rgba(251, 191, 36, 0.3);">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#FBBF24" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M12 16v-4"></path>
            <path d="M12 8h.01"></path>
          </svg>
        </div>
        <h4 style="color: #FBBF24; font-size: 13px; font-weight: 700;">Mother's Image</h4>
        <div id="motherStatus" style="font-size: 10px; color: #94A3B8;">Not Selected</div>
      </div>
    </div>

    <button onclick="runParentalAnalysis()"
      style="width: 100%; background: linear-gradient(135deg, #F59E0B, #D97706); border: none; padding: 15px; border-radius: 12px; font-weight: 800; color: white; cursor: pointer; margin-bottom: 25px;">
      EXECUTE STRUCTURAL RECONSTRUCTION
    </button>

    <!-- 5-Step Process Visualizer (Hidden initially) -->
    <div id="parentalStepper" style="display: none;">
      <div class="processing-step" id="step1">
        <svg class="step-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
        </svg>
        Step 1: Parent embeddings extracted
      </div>
      <div class="processing-step" id="step2">
        <svg class="step-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
        </svg>
        Step 2: Heritable features isolated (Bone Geometry)
      </div>
      <div class="processing-step" id="step3">
        <svg class="step-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
        </svg>
        Step 3: Structural fusion (Weighted 50/50)
      </div>
      <div class="processing-step" id="step4">
        <svg class="step-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
        </svg>
        Step 4: Age/Sex conditioning applied
      </div>
      <div class="processing-step" id="step5">
        <svg class="step-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
        </svg>
        Step 5: Confidence calibrated
      </div>
    </div>
  </section><!-- Success Notification -->
  <div class="success-notification" id="successNotification"></div>
  <script>
    // Global state
    let currentCaseId = null;
    let uploadedFiles = {
      main: null,
      father: null,
      mother: null
    };

    // Login
    document.getElementById('loginForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const role = document.getElementById('loginRole').value;
      const roleDisplay = role.charAt(0).toUpperCase() + role.slice(1);

      const userRoleElement = document.getElementById('userRoleDisplay');
      if (userRoleElement) userRoleElement.textContent = roleDisplay;

      document.getElementById('loginPage').style.display = 'none';
      document.getElementById('dashboard').classList.add('active');
    });

    // Navigation
    const navItems = document.querySelectorAll('.mobile-nav-item');
    const sections = {
      'dashboard': document.getElementById('dashboardSection'),
      'upload': document.getElementById('uploadSection'),
      'cctv': document.getElementById('cctvSection'),
      'match': document.getElementById('matchSection'),
      'assistant': document.getElementById('assistantSection'),
      'reports': document.getElementById('reportsSection'),
      'parental': document.getElementById('parentalSection'),
      'forensic': document.getElementById('forensicSection'),
      'parentalAnalysis': document.getElementById('parentalAnalysisSection')
    };

    const pageTitles = {
      'dashboard': 'Dashboard',
      'upload': 'Upload Data',
      'cctv': 'Live CCTV',
      'match': 'Match Result',
      'assistant': 'AI Assistant',
      'reports': 'Reports',
      'parental': 'Parental Data',
      'forensic': 'Forensic Analysis',
      'parentalAnalysis': 'Parental Analysis'
    };

    // ... (rest of nav code)

    // Parental Analysis Logic
    function runParentalAnalysis() {
      if (!uploadedFiles.father || !uploadedFiles.mother) {
        showSuccess("⚠️ Please upload both Father's and Mother's images first.");
        return;
      }

      const stepper = document.getElementById('parentalStepper');
      stepper.style.display = 'block';

      const steps = ['step1', 'step2', 'step3', 'step4', 'step5'];
      let currentStep = 0;

      function runNextStep() {
        if (currentStep >= steps.length) {
          showSuccess("✅ Reconstruction Complete. Hypothesis Created.");
          setTimeout(() => {
            navigateTo('match');
            // Could call updateMatchResults here with special reconstruction flag
          }, 1000);
          return;
        }

        const stepId = steps[currentStep];
        const stepEl = document.getElementById(stepId);

        stepEl.classList.add('active'); // Turn blue/processing

        setTimeout(() => {
          stepEl.classList.remove('active');
          stepEl.classList.add('complete'); // Turn green/done
          // Update icon to checkmark
          stepEl.querySelector('.step-icon').innerHTML = '<polyline points="20 6 9 17 4 12"></polyline>';

          currentStep++;
          runNextStep();
        }, 800); // 800ms per step simulation
      }

      runNextStep();
    }

    // Update file status display
    const originalUploadParent = uploadParentData;
    uploadParentData = function (parentType) {
      triggerFileUpload((file) => {
        uploadedFiles[parentType] = file;
        const statusId = parentType === 'father' ? 'fatherStatus' : 'motherStatus';
        document.getElementById(statusId).innerText = "✅ " + file.name;
        showSuccess(`📤 ${parentType === 'father' ? 'Father' : 'Mother'} image selected.`);
      });
    };

    navItems.forEach(item => {
      item.addEventListener('click', () => {
        const sectionName = item.dataset.section;
        navigateTo(sectionName);
      });
    });

    function navigateTo(sectionName) {
      navItems.forEach(nav => nav.classList.remove('active'));
      const targetNav = document.querySelector(`.mobile-nav-item[data-section="${sectionName}"]`);
      if (targetNav) targetNav.classList.add('active');

      Object.values(sections).forEach(section => {
        if (section) section.classList.remove('active');
      });
      if (sections[sectionName]) sections[sectionName].classList.add('active');

      const pageTitleElement = document.getElementById('pageTitle');
      if (pageTitleElement) pageTitleElement.textContent = pageTitles[sectionName];

      window.scrollTo(0, 0);
    }

    // Upload tabs
    const uploadTabs = document.querySelectorAll('.upload-tab');
    uploadTabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const category = tab.dataset.category;
        const categoryTabs = document.querySelectorAll(`.upload-tab[data-category="${category}"]`);
        categoryTabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
      });
    });

    // --- API Integration ---

    // Helper to create file input
    function triggerFileUpload(callback) {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = 'image/*,video/*';
      input.onchange = e => {
        if (e.target.files.length > 0) {
          callback(e.target.files[0]);
        }
      };
      input.click();
    }

    async function uploadMissingData() {
      triggerFileUpload(async (file) => {
        showSuccess('📤 Uploading case file...');
        const formData = new FormData();
        formData.append('file', file);
        formData.append('case_type', 'missing_person');

        try {
          const response = await fetch('http://localhost:3000/api/upload-case', {
            method: 'POST',
            body: formData
          });
          const data = await response.json();

          if (response.ok) {
            currentCaseId = data.case_id;
            uploadedFiles.main = file;
            showSuccess(`✅ Case Created: ${data.case_id}`);

            // Auto-process to check for damage
            processCase();
          } else {
            showSuccess(`❌ Upload failed: ${data.detail}`);
          }
        } catch (error) {
          console.error("Upload Error:", error);
          showSuccess("❌ Connection error. Ensure backend is running.");
        }
      });
    }

    async function processCase() {
      if (!currentCaseId) return;

      const processingPanel = document.getElementById('processingPanel');
      processingPanel.classList.add('active');
      document.getElementById('progressFill').style.width = '50%';
      document.getElementById('progressText').textContent = 'Analyzing...';

      const formData = new FormData();
      formData.append('case_id', currentCaseId);

      if (uploadedFiles.father) formData.append('father_image', uploadedFiles.father);
      if (uploadedFiles.mother) formData.append('mother_image', uploadedFiles.mother);

      try {
        const response = await fetch('http://localhost:3000/api/process-case', {
          method: 'POST',
          body: formData
        });
        const result = await response.json();

        document.getElementById('progressFill').style.width = '100%';

        setTimeout(() => {
          processingPanel.classList.remove('active');

          if (result.branch_taken === 'DAMAGED_DATA' && !result.parental_reconstruction_used) {
            showSuccess("⚠️ High damage detected. Switch to Parental Upload.");
            navigateTo('parental');
          } else {
            showSuccess("✅ Analysis Complete.");
            navigateTo('match');
            updateMatchResults(result);
          }
        }, 1000);

      } catch (error) {
        console.error("Processing Error:", error);
        processingPanel.classList.remove('active');
        showSuccess("❌ Processing failed.");
      }
    }

    function uploadSuspectData() {
      triggerFileUpload((file) => {
        showSuccess('📤 Suspected match data uploaded (mock).');
        // This would likely go to a similar upload endpoint in a real scenario
      });
    }

    function matchWithCCTV() {
      showSuccess('📡 Connecting to live feed...');
      setTimeout(() => processCase(), 1000);
    }

    function matchWithSuspect() {
      processCase();
    }

    // Parental Data
    function uploadParentData(parentType) {
      triggerFileUpload((file) => {
        uploadedFiles[parentType] = file;
        showSuccess(`📤 ${parentType === 'father' ? 'Father' : 'Mother'}'s image staged.`);
      });
    }

    function processParentalData() {
      if (!uploadedFiles.father || !uploadedFiles.mother) {
        showSuccess("⚠️ Please upload both parents' images.");
        return;
      }
      processCase();
    }

    function updateMatchResults(result) {
      // Update UI based on AI result
      const analysisContent = document.querySelector('.analysis-content');
      let html = `<strong>AI Summary:</strong> `;

      if (result.parental_reconstruction_used) {
        html += `<span style="color: #FBBF24; font-weight: bold;">🧬 PARENTAL RECONSTRUCTION APPLIED.</span><br>
            Analyzed <strong>father's</strong> and <strong>mother's</strong> phenotypic markers to reconstruct likely facial structure.<br>
            Method: Hereditary Facial Feature Averaging.`;
      } else if (result.damage_level === 'HIGH') {
        html += `Analysis was difficult due to <strong style="color: #EF4444;">HIGH DAMAGE</strong> score (${result.damage_score.toFixed(2)}). Features may be unreliable.`;
      } else {
        html += `High quality face detected. <strong>Direct facial matching</strong> used.`;
      }

      analysisContent.innerHTML = html;

      if (result.parental_reconstruction_used) {
        document.querySelector('.confidence-value').textContent = "85%"; // Confidence for reconstruction
        document.querySelector('.confidence-fill').style.width = "85%";
      }
    }

    // Match actions
    function confirmMatch() {
      showSuccess('✅ Match confirmed! Case verified.');
      setTimeout(() => navigateTo('reports'), 1500);
    }

    function rejectMatch() {
      showSuccess('❌ Match rejected. Case returned to pending.');
    }

    function requestVerification() {
      showSuccess('📋 Verification request sent.');
    }

    // Chat
    function sendChatMessage() {
      const input = document.getElementById('chatInput');
      const message = input.value.trim();

      if (message) {
        const messagesContainer = document.getElementById('chatMessages');
        const userMessageHTML = `
          <div class="chat-message">
            <div class="message-avatar" style="background: rgba(148, 163, 184, 0.3);">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
            </div>
            <div class="message-content">
              <div class="message-header">
                <span class="message-sender">You</span>
                <span class="message-time">Just now</span>
              </div>
              <div class="message-text">${message}</div>
            </div>
          </div>
        `;
        messagesContainer.insertAdjacentHTML('beforeend', userMessageHTML);
        input.value = '';
        messagesContainer.scrollTop = messagesContainer.scrollHeight;

        setTimeout(() => {
          const aiResponse = `
            <div class="chat-message">
              <div class="message-avatar">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                  <circle cx="12" cy="12" r="3"/>
                  <path d="M12 1v6m0 6v6"/>
                </svg>
              </div>
              <div class="message-content">
                <div class="message-header">
                  <span class="message-sender">AI Assistant</span>
                  <span class="message-time">Just now</span>
                </div>
                <div class="message-text">I've processed your request. The analysis shows <strong>high confidence</strong> based on multiple biometric markers.</div>
              </div>
            </div>
          `;
          messagesContainer.insertAdjacentHTML('beforeend', aiResponse);
          messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }, 1000);
      }
    }

    document.getElementById('chatInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        sendChatMessage();
      }
    });

    function askAI(question) {
      const input = document.getElementById('chatInput');
      input.value = question;
      sendChatMessage();
    }

    // Reports
    function exportReport() {
      showSuccess('📥 Generating PDF report...');
      setTimeout(() => {
        showSuccess('✅ Report exported successfully!');
      }, 1500);
    }

    function downloadReport() {
      showSuccess('📥 Downloading case report...');
    }

    // Success notification
    function showSuccess(message) {
      const notification = document.getElementById('successNotification');
      notification.textContent = message;
      notification.classList.add('active');

      setTimeout(() => {
        notification.classList.remove('active');
      }, 3000);
    }

    async function sendData(eventType, details) {
      try {
        console.log('Sending data:', eventType, details);
        const response = await fetch('http://localhost:3000/api/data', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ event_type: eventType, details: details })
        });
        const result = await response.json();
        console.log('Data logged to DB:', result);
      } catch (e) {
        console.error('Error logging data to DB:', e);
      }
    }
  </script>
  <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'99bc3d5544527e91',t:'MTc2MjY4MDA4My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
  <script>
    // CCTV Functions
    function findRouteCCTV() {
      const source = document.getElementById('routeSource').value;
      const dest = document.getElementById('routeDest').value;
      const date = document.getElementById('cctvDate').value;
      const startTime = document.getElementById('cctvStartTime').value;
      const endTime = document.getElementById('cctvEndTime').value;

      if (!source || !dest) {
        showSuccess("⚠️ Please enter source and destination");
        return;
      }

      let msg = `🔍 Fetching feeds from ${source} to ${dest}`;
      if (date) msg += ` on ${date}`;
      if (startTime && endTime) msg += ` between ${startTime} and ${endTime}`;

      showSuccess(msg + "...");

      // Simulate DB Fetch
      const tableBody = document.querySelector('.cctv-table-container tbody');
      tableBody.innerHTML = '<tr><td colspan="5" style="text-align:center; padding: 20px; color: #94A3B8;">Loading route data...</td></tr>';

      setTimeout(() => {
        tableBody.innerHTML = `
                <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                  <td style="padding: 12px 15px; font-family: monospace; color: #00BFFF;">CAM-01</td>
                  <td style="padding: 12px 15px;">${source} - Main Rd</td>
                  <td style="padding: 12px 15px;">0.0 km</td>
                  <td style="padding: 12px 15px;"><span style="color: #22C55E;">● Live</span></td>
                  <td style="padding: 12px 15px;">
                    <button onclick="viewCCTV('CAM-01')" style="background: rgba(0, 191, 255, 0.15); color: #00BFFF; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 500;">
                      View Feed
                    </button>
                  </td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                  <td style="padding: 12px 15px; font-family: monospace; color: #00BFFF;">CAM-08</td>
                  <td style="padding: 12px 15px;">Intermediate Junction 1</td>
                  <td style="padding: 12px 15px;">1.4 km</td>
                  <td style="padding: 12px 15px;"><span style="color: #FBBF24;">● Rec</span></td>
                  <td style="padding: 12px 15px;">
                    <button onclick="viewCCTV('CAM-08')" style="background: rgba(0, 191, 255, 0.15); color: #00BFFF; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 500;">
                      View Footage
                    </button>
                  </td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                   <td style="padding: 12px 15px; font-family: monospace; color: #00BFFF;">CAM-22</td>
                   <td style="padding: 12px 15px;">${dest} - Entrance</td>
                   <td style="padding: 12px 15px;">3.8 km</td>
                   <td style="padding: 12px 15px;"><span style="color: #22C55E;">● Live</span></td>
                   <td style="padding: 12px 15px;">
                     <button onclick="viewCCTV('CAM-22')" style="background: rgba(0, 191, 255, 0.15); color: #00BFFF; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 500;">
                       View Feed
                     </button>
                   </td>
                </tr>
         `;
        showSuccess("✅ Route data loaded");
      }, 1500);
    }

    function viewCCTV(camId) {
      document.getElementById('cctvPlayer').style.display = 'block';
      document.getElementById('cctvPlayerTitle').innerText = camId + " - Live Feed";
      // Simulate loading or connecting
      window.scrollTo({ top: document.getElementById('cctvPlayer').offsetTop, behavior: 'smooth' });
    }

    function closeCCTV() {
      document.getElementById('cctvPlayer').style.display = 'none';
    }
    function handleForensicUpload(type, file) {
      if (!file) return;

      showSuccess(`📤 Uploading ${type}...`);

      // Simulate network request
      setTimeout(() => {
        showSuccess(`✅ ${type} Uploaded: ${file.name}`);

        // Find the button that triggered this and update its text
        // This is a bit tricky without IDs, but we can rely on the visual feedback for now
        // Or we could add a visual indicator like a checkmark to the card

        // Store for final submission
        if (!window.forensicUploads) window.forensicUploads = {};
        window.forensicUploads[type] = file;

      }, 1000);
    }

    function submitForensicData() {
      if (!window.forensicUploads || Object.keys(window.forensicUploads).length === 0) {
        showSuccess("⚠️ No forensic data uploaded yet. Please upload at least one file.");
        return;
      }

      const count = Object.keys(window.forensicUploads).length;
      showSuccess(`✅ Processing ${count} forensic files...`);

      // Simulate efficient batch processing
      const processingPanel = document.getElementById('processingPanel');
      if (processingPanel) processingPanel.classList.add('active');

      setTimeout(() => {
        if (processingPanel) processingPanel.classList.remove('active');
        showSuccess("🔍 Forensic Analysis Complete. Finding correlations...");
        navigateTo('match');
      }, 2000);
    }

  </script>
</body>

</html>